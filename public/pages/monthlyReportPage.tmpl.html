<div class="row">
    <h4>You are viewing {{ month }}.</h4>
    <div class="col s6 m6">
        <label for="selectStartDate">Select month: </label>
        <input type="month" name="selectStartDate" ng-model="selectStartDate" required>
          <button class="btn waves-effect waves-light" ui-sref="parent.monthReportPage({siteResult:monthReport.id, month:convertDateMonth(selectStartDate)})">Go to month</button>
    </div>
</div>

<div id="section-to-print">
    <div class="row">
        <div>
            <h4>Asset information</h4>
        </div>
        <div class="col s6 m6">
            <h5>Site information</h5>
            <table>
                <tr>
                    <td>Site name</td>
                    <td>{{ monthReport.name }}</td>
                </tr>
                <tr>
                    <td>Site address</td>
                    <td>{{ monthReport.location }}</td>
                </tr>
                <tr>
                    <td>O&M Provider</td>
                    <td>{{ monthReport.epc }}</td>
                </tr>
            </table>
        </div>
        <div class="col s6 m6">
            <h5>Technical information</h5>
            <table>
                <tr>
                    <td>TIC (MWp)</td>
                    <td>{{ monthReport.tic_mwp }}</td>
                </tr>
                <tr>
                    <td>DNC (MWp)</td>
                    <td>{{ monthReport.dnc_mw }}</td>
                </tr>
                <tr>
                    <td>Panels</td>
                    <td>{{ monthReport.panel_name }}</td>
                </tr>
                <tr>
                    <td>Inverters</td>
                    <td>{{ monthReport.inverter_name }}</td>
                </tr>
                <tr>
                    <td>Transformers</td>
                    <td>{{ monthReport.transformer_type }}</td>
                </tr>
            </table>
        </div>
    </div>
    <div class="row">
        <div>
            <h4>Results</h4>
            <div class="col s6 m6">
                <h5>Performance</h5>
                <table>
                    <tr>
                        <td>Export actual (kWh)</td>
                        <td>{{ monthReport.export | number:2 }}</td>
                    </tr>
                    <tr>
                        <td>Export expected (kWh)</td>
                        <td>{{ monthReport.theoretical | number:2 }}</td>
                    </tr>
                    <tr>
                        <td>PR Actual</td>
                        <td>{{ monthReport.pr * 100 | number:2 }}%</td>
                    </tr>
                    <tr>
                        <td>Availabilty</td>
                        <td>{{ monthReport.availabilty * 100 | number:2 }}%</td>
                    </tr>
                </table>
            </div>
            <div class="col s6 m6">
                <h5>Financial</h5>
                <table>
                    <tr>
                        <td>RO price</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>RO income</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>PPA price</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>PPA income</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Total income</td>
                        <td></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <div class="row">
        <h4>Data</h4>
        <div class="col s12 m12">
            <highchart id="chartMonthGeneration" config="chartMonthGeneration"></highchart>
        </div>
        <div class="col s12 m12">
            <highchart id="chartMonthSumGeneration" config="chartMonthSumGeneration"></highchart>
        </div>
    </div>
    <div class="row">
        <h4>Relevant issues</h4>
        <p>Issues created in this month</p>
        <div class="col s12 m6">
            <h5>Open</h5>
            <table ng-if="openMonthIncidents[0]">
                <tr>
                    <th>Date logged</th>
                    <th>Category</th>
                    <th>Loss of generation</th>
                    <th>Reported by</th>
                </tr>
                <tr ng-repeat="incident in openMonthIncidents">
                    <td>{{ incident.date_logged  | date:'EEEE d'}}</td>
                    <td>{{ incident.category }}</td>
                    <td>{{ incident.loss_of_generation }}</td>
                    <td>{{ incident.reported_by_company }}</td>
                </tr>
            </table>
            <p ng-if="!openMonthIncidents[0]">None</p>
        </div>
        <div class="col s12 m6">
            <h5>Closed</h5>
            <table ng-if="closedMonthIncidents[0]">
                <tr>
                    <th>Date logged</th>
                    <th>Category</th>
                    <th>Loss of generation</th>
                    <th>Reported by</th>
                </tr>
                <tr ng-repeat="incident in closedMonthIncidents">
                    <td>{{ incident.date_logged  | date:'EEEE d' }}</td>
                    <td>{{ incident.category }}</td>
                    <td>{{ incident.loss_of_generation }}</td>
                    <td>{{ incident.reported_by_company }}</td>
                </tr>
            </table>
            <p ng-if="!closedMonthIncidents[0]">None</p>
        </div>
    </div>
</div>