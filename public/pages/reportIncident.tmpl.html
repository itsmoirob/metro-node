<div class="row">
  <div class="col s12 m12">
    <div class="card blue-grey darken-1">
      <div class="card-content white-text">
        <span class="card-title">Incident: {{ incidentReportLog.incident_report_number }}</span>
        <p>
          {{ incidentReportLog.details }}
        </p>
        <hr>
        <ul>
          <li><b>Date logged: </b>{{ incidentReportLog.date_logged | date:"dd/MM/yyyy" }}</li>
          <li><b>Start time: </b>{{ incidentReportLog.start_time | date:"dd/MM/yyyy" }}</li>
          <li><b>End time: </b>{{ incidentReportLog.end_time | date:"dd/MM/yyyy" }}</li>
          <li><b>Reported by: </b>{{ incidentReportLog.reported_by_person }} ({{ incidentReportLog.reported_by_company }})</li>
        </ul>
        <ul>
          <li><b>Category: </b>{{ incidentReportLog.category }}</li>
          <li><b>Planned: </b>{{ incidentReportLog.planned }}</li>
          <li><b>Loss of generation: </b>{{ incidentReportLog.loss_of_generation }}</li>
          <li><b>Status: </b>{{ incidentReportLog.status }}</li>
        </ul>
      </div>
      <div class="card-action">
        <a href="#">Edit (not working)</a>
        <a ng-if="incidentReportLog.status == 'Closed'">Closed</a>
        <input type="hidden" name="status" value=0 />
        <button ng-if="incidentReportLog.status == 'Open'" class="btn waves-effect waves-light formSubmit" ng-click="closeStatus()" name="updateStatus">Close</button>
      </div>
    </div>
  </div>
  <div ng-if="!incidentReportLogComment[0]">
    <h4>There are no comments. Say something.</h4>
  </div>
  <div ng-if="incidentReportLogComment[0]">
    <h4>Comments</h4>
    <div ng-repeat="comment in incidentReportLogComment">
      <div class="card-panel teal">
        <span class="white-text">"{{ comment.comment }}"
        </span>
        <p ng-if="!comment.created_by" class="white-text">Comment from {{ comment.date | date:'dd/MM/yyyy' }}
        </p>
        <p ng-if="comment.created_by" class="white-text">Comment from {{comment.created_by}} on {{ comment.date | date:'dd/MM/yyyy' }}
        </p>
      </div>
    </div>
  </div>
  <div class="addComment">
    <form name="commentForm" role="form" action="/users/newComment" method="post">
      <div class="input-field col s12">
        <textarea name="comment" class="materialize-textarea" required></textarea>
        <label for="Comment">Add a new comment</label>
      </div>
      <input type="hidden" name="log_id" value="{{ incidentReportLog.id }}" />
      <button class="btn waves-effect waves-light formSubmit" type="submit" name="submitComment">Submit</button>
    </form>
  </div>
</div>
